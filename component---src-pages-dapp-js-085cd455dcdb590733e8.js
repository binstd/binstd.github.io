(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{255:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a.n(n),o=a(0),i=a.n(o),c=a(20),s=a(351),l=a(352),p=a(1),m=a.n(p),u=a(75),d=a(261),h=a.n(d),g=a(268),f=a.n(g),b=a(259),y=a(262),E=a.n(y),v=a(257),x=a.n(v),k=a(280),w=a.n(k),C=a(260),S=a.n(C);function N(e){var t=e.classes,a=e.option;return console.log(a),i.a.createElement("div",{className:t.root},i.a.createElement(E.a,{className:t.paper},i.a.createElement(h.a,{container:!0,spacing:16},i.a.createElement(h.a,{item:!0},i.a.createElement(w.a,{className:t.image,onClick:function(){return Object(c.b)("/dapp/create/"+a.contractName)}},i.a.createElement("img",{className:t.img,alt:"complex",src:a.imgUrl}))),i.a.createElement(h.a,{item:!0,xs:12,sm:!0,container:!0},i.a.createElement(h.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:16},i.a.createElement(h.a,{item:!0,xs:!0},i.a.createElement(x.a,{gutterBottom:!0,variant:"subtitle1"},a.title),i.a.createElement(x.a,{gutterBottom:!0},a.description),i.a.createElement(S.a,{color:"primary",size:"small",className:t.button,onClick:function(){return Object(c.b)("/dapp/create/"+a.contractName)}},"部  署")))))))}N.propTypes={classes:m.a.object.isRequired};var j=Object(u.withStyles)(function(e){return{root:{flexGrow:1},paper:{padding:2*e.spacing.unit,margin:"auto",maxWidth:600,minHeight:180},image:{width:128,height:128},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"},button:{margin:e.spacing.unit}}})(N),T=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={contract:[]},a}r()(t,e);var a=t.prototype;return a.componentWillMount=function(){var e=this;f()(b.a+"/api/chain/allcontractlist").then(function(e){return e.json()}).then(function(t){0==t.code&&e.setState({contract:t.data})}).catch(function(e){console.log(e)})},a.render=function(){var e=this.props.classes,t=this.state.contract.map(function(e,t){e.title,e.description,e.contractName;return i.a.createElement(h.a,{key:t,item:!0,xs:12,sm:6},i.a.createElement(j,{option:e}))});return i.a.createElement("div",{className:e.root},i.a.createElement(h.a,{container:!0,spacing:24},t))},t}(i.a.Component);T.propTypes={classes:m.a.object.isRequired};var O=Object(u.withStyles)(function(e){return{root:{flexGrow:1,boxShadow:"none",padding:"30px",marginTop:"50px"},paper:{padding:2*e.spacing.unit,textAlign:"center",color:e.palette.text.secondary}}})(T),A=a(357),I=a(275),W=a(294),D=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t.prototype.render=function(){return i.a.createElement("div",null,i.a.createElement(I.a,null,i.a.createElement("div",{style:{margin:"0 auto",padding:"0px 1.0875rem 1.45rem",paddingTop:0}},i.a.createElement(c.a,null,i.a.createElement(s.a,{path:"/dapp/create/:name/"}),i.a.createElement(O,{path:"/dapp/index"}),i.a.createElement(A.a,{path:"/dapp/manage/:contractName/:contractAddress/"}),i.a.createElement(l.a,{path:"/dapp/:address/"}))),i.a.createElement(W.a,null)))},t}(o.Component);t.default=D},277:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r});var n=function(e,t){return e[t]?(console.log("jsonData[name].value",e[t].value),e[t].value):t},r=function(e,t,a){return console.log(e,t,a),e[t]&&e[t].inputs&&e[t].inputs[a]?e[t].inputs[a]:a}},351:function(e,t,a){"use strict";a(320),a(321),a(285),a(122),a(76),a(322);var n=a(9),r=a.n(n),o=a(0),i=a.n(o),c=a(259),s=a(268),l=a.n(s),p=a(20),m=a(264),u=a(277),d=a(261),h=a.n(d),g=a(257),f=a.n(g),b=a(276),y=a.n(b),E=a(260),v=a.n(E),x=a(1),k=a.n(x),w=a(115),C=a.n(w),S=a(262),N=a.n(S),j=function(e){function t(t){var a;return(a=e.call(this,t)||this).SetInput=function(e,t){var n=a.state.deploydata;n[e]=t.target.value,a.setState({deploydata:n})},a.delpoyContract=function(){var e=Object.values(a.state.deploydata);window.ethereum.enable().then(function(e){console.log(e)}),console.log(a.state.deploydata),m.a.accounts().then(function(t){var n=m.a.contract(a.state.contract.abi,a.state.contract.bytecode,{from:t[0],gas:4e6});n.new.apply(n,e.concat([function(e,t){e||a.postDapp(t)}]))})},a.postDapp=function(e){var t={dappName:"",txHash:e,contractInfo:a.props.name,publicAddress:a.state.userinfo.address,dappChain:a.state.network};console.log(t),l()(c.a+"/api/dapp",{body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"}).then(function(e){return e.json()}).then(function(t){t.id&&Object(p.b)("/dapp/deployed/"+e)})},a.state={contract:{},inputlist:[],deploydata:{},userinfo:{},network:"",transferJson:{}},a}r()(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this,t="";if(m.a.net_version().then(function(a){switch(a){case"1":console.log("This is mainnet"),t="eth_main";break;case"2":console.log("This is the deprecated Morden test network."),t="eth_morden";break;case"3":console.log("This is the ropsten test network."),t="eth_ropsten";break;case"4":console.log("This is the Rinkeby test network."),t="eth_rinkeby";break;case"42":console.log("This is the Kovan test network."),t="eth_kovan";break;default:console.log("This is an unknown network."),t="eth_unknown"}e.setState({network:t})}),localStorage.getItem("userinfo")){var a=JSON.parse(localStorage.getItem("userinfo"));this.setState({userinfo:a})}l()(c.a+"/api/chain/abi?apiname="+this.props.name).then(function(e){return e.json()}).then(function(t){var a={};if(0===t.code){var n=[],r=t.data.abi,o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var c;if(o){if(i>=r.length)break;c=r[i++]}else{if((i=r.next()).done)break;c=i.value}var s=c;"constructor"===s.type&&(n=s.inputs)}var l=n,p=Array.isArray(l),m=0;for(l=p?l:l[Symbol.iterator]();;){var u;if(p){if(m>=l.length)break;u=l[m++]}else{if((m=l.next()).done)break;u=m.value}a[u.name]=""}e.setState({contract:t.data,transferJson:t.data.translate,inputlist:n,deploydata:a})}}).catch(function(e){console.log("失败")})},a.render=function(){var e=this,t=this.state,a=t.inputlist,n=t.transferJson,r=this.props.classes,o=a.map(function(t,a){var r=t.name;return i.a.createElement(h.a,{key:a,item:!0,xs:12},i.a.createElement(y.a,{required:!0,id:"address1",name:r,label:Object(u.b)(n,"constructor",r),onChange:e.SetInput.bind(e,r),fullWidth:!0,autoComplete:"billing address-line1"}))});return i.a.createElement("div",{style:{minHeight:"600px"}},i.a.createElement(N.a,{className:r.paper},i.a.createElement(f.a,{variant:"h6",gutterBottom:!0},"合约部署"),i.a.createElement(h.a,{container:!0,spacing:24},o),i.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:r.submit,onClick:function(){return e.delpoyContract()}},"确认")))},t}(i.a.Component);j.propTypes={classes:k.a.object.isRequired},t.a=C()(function(e){return{paper:{maxWidth:"550px",margin:"auto",marginTop:12*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:5*e.spacing.unit+"px "+5*e.spacing.unit+"px "+3*e.spacing.unit+"px"},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}})(j)},352:function(e,t,a){"use strict";var n=a(9),r=a.n(n),o=a(0),i=a.n(o),c=a(268),s=a.n(c),l=a(259),p=a(1),m=a.n(p),u=a(115),d=a.n(u),h=a(262),g=a.n(h),f=a(261),b=a.n(f),y=a(257),E=a.n(y),v=a(280),x=a.n(v),k=a(20),w=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={dapplist:[]},a}r()(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this;s()(l.a+"/api/dapp/"+this.props.address+"?chain=eth_ropsten").then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({dapplist:t})}).catch(function(e){console.log("失败")})},a.render=function(){var e=this.state.dapplist,t=this.props.classes,a=e.map(function(e,a){console.log(e);var n=e.contractInfo,r=e.txHash,o=e.contractAddress;return i.a.createElement("div",{key:a,className:t.root},i.a.createElement(g.a,{className:t.paper},i.a.createElement(b.a,{container:!0,spacing:24},i.a.createElement(b.a,{item:!0},i.a.createElement(x.a,{className:t.image,onClick:function(){return Object(k.b)("/dapp/manage/"+n+"/"+o)}},i.a.createElement("img",{className:t.img,alt:"complex",src:"https://smartz.io/static/img/erc-20.png"}))),i.a.createElement(b.a,{item:!0,xs:8,sm:!0,container:!0},i.a.createElement(b.a,{item:!0,xs:!0,container:!0,direction:"column"},i.a.createElement(b.a,{item:!0,xs:!0,style:{maxWidth:"500px",wordWrap:"break-word"}},i.a.createElement(E.a,{gutterBottom:!0,variant:"subtitle1"},n),"合约地址:",i.a.createElement(E.a,{color:"textSecondary"},i.a.createElement("a",{href:"http://localhost:8000",color:"textSecondary",target:"_blank",rel:"noopener noreferrer"},r))))))))});return i.a.createElement("div",{style:{minHeight:"600px",marginTop:"80px"}},a)},t}(i.a.Component);w.propTypes={classes:m.a.object.isRequired},t.a=d()(function(e){return{root:{marginTop:10},paper:{padding:2*e.spacing.unit,margin:"auto",maxWidth:660,height:140},image:{maxwidth:"80px",maxheight:"80px"},img:{margin:"auto",display:"block",maxWidth:"80px",maxHeight:"80px"}}})(w)},357:function(e,t,a){"use strict";a(76),a(322),a(320),a(321),a(122),a(323),a(285);var n=a(9),r=a.n(n),o=a(0),i=a.n(o),c=a(259),s=a(277),l=a(268),p=a.n(l),m=a(20),u=a(261),d=a.n(u),h=a(257),g=a.n(h),f=a(276),b=a.n(f),y=a(260),E=a.n(y),v=a(1),x=a.n(v),k=a(115),w=a.n(k),C=a(402),S=a.n(C),N=a(344),j=a.n(N),T=a(404),O=a.n(T),A=a(346),I=a.n(A),W=a(403),D=a.n(W),H=a(75),M=a(393),J=a.n(M),_=a(281),q=a.n(_),z=a(395),B=a.n(z);function F(e){var t=e.classes,a=e.setMessage,n=e.messageText,r=e.messageIsOpen;return i.a.createElement("div",null,i.a.createElement(J.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:r,autoHideDuration:6e3,onClose:function(){return a(!1)},ContentProps:{"aria-describedby":"message-id"},message:i.a.createElement("span",{id:"message-id"},n),action:[i.a.createElement(E.a,{key:"undo",color:"secondary",size:"small",onClick:function(){return a(!1)}},"已读"),i.a.createElement(q.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:function(){return a(!1)}},i.a.createElement(B.a,null))]}))}F.propTypes={classes:x.a.object.isRequired};var R=Object(H.withStyles)(function(e){return{close:{padding:e.spacing.unit/2}}})(F),P=a(405),G=a.n(P),K=a(409),U=a.n(K),L=a(407),Q=a.n(L),V=a(408),X=a.n(V),Y=a(406),Z=a.n(Y),$=a(262),ee=a.n($),te=a(396),ae=a.n(te),ne=a(401),re=a.n(ne),oe=a(400),ie=a.n(oe),ce=a(398),se=a.n(ce),le=a(399),pe=a.n(le),me=0;function ue(e,t,a,n,r){return{id:me+=1,name:e,calories:t,fat:a,carbs:n,protein:r}}var de=[ue("Frozen yoghurt",159,6,24,4),ue("Ice cream sandwich",237,9,37,4.3)],he=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={dapplist:[]},a}r()(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this;p()(c.a+"/api/dapp/"+this.props.address+"?chain=eth_ropsten").then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({dapplist:t})}).catch(function(e){console.log("失败")})},a.render=function(){var e=this.props.classes;return i.a.createElement("div",{style:{minHeight:"600px",marginTop:"10px"}},i.a.createElement("div",{className:e.root},i.a.createElement(ee.a,{className:e.paper},i.a.createElement(d.a,{container:!0,spacing:24},i.a.createElement(d.a,{item:!0,xs:8,sm:!0,container:!0},i.a.createElement(d.a,{item:!0,xs:!0,container:!0,direction:"column"},i.a.createElement(d.a,{item:!0,xs:!0,style:{maxWidth:"400px"}},i.a.createElement(g.a,{gutterBottom:!0,variant:"subtitle1"},"我是合约11"),"合约地址:",i.a.createElement(g.a,{color:"textSecondary"},i.a.createElement("a",{href:"http://localhost:8000",color:"textSecondary",target:"_blank",rel:"noopener noreferrer"},"luz243434343")))))))),i.a.createElement("div",{className:e.root},i.a.createElement(ee.a,{className:e.paper},i.a.createElement(d.a,{container:!0,spacing:24},i.a.createElement(d.a,{item:!0,xs:8,sm:!0,container:!0},i.a.createElement(d.a,{item:!0,xs:!0,container:!0,direction:"column"},i.a.createElement(d.a,{item:!0,xs:!0,style:{}},i.a.createElement(g.a,{gutterBottom:!0,variant:"subtitle1"},"方法名称: 转账"),"hashhashhashhashhashhashhashhash","输入:",i.a.createElement(ae.a,{className:e.table},i.a.createElement(se.a,null,i.a.createElement(pe.a,null,i.a.createElement(ie.a,null,"参数名"),i.a.createElement(ie.a,{numeric:!0},"值"))),i.a.createElement(re.a,null,de.map(function(e){return i.a.createElement(pe.a,{key:e.id},i.a.createElement(ie.a,{component:"th",scope:"row"},e.name),i.a.createElement(ie.a,{numeric:!0},e.calories))}))),"结果:",i.a.createElement(ae.a,{className:e.table},i.a.createElement(se.a,null,i.a.createElement(pe.a,null,i.a.createElement(ie.a,null,"参数名"),i.a.createElement(ie.a,{numeric:!0},"值"))),i.a.createElement(re.a,null,de.map(function(e){return i.a.createElement(pe.a,{key:e.id},i.a.createElement(ie.a,{component:"th",scope:"row"},e.name),i.a.createElement(ie.a,{numeric:!0},e.calories))}))))))))))},t}(i.a.Component);he.propTypes={classes:x.a.object.isRequired};var ge=w()(function(e){return{root:{marginTop:10},paper:{padding:2*e.spacing.unit,margin:"auto",maxWidth:600},image:{width:"100px",height:"100px"},img:{margin:"auto",display:"block",maxWidth:"80px",maxHeight:"80px"},table:{width:"90%",margin:"5px auto"}}})(he),fe=a(264),be=function(e){function t(t){var a;return(a=e.call(this,t)||this).handleClickOpen=function(e){if(0===e.inputs.length)console.log(e),fe.a.accounts().then(function(t){fe.a.contract(a.state.contractabi).at(a.props.contractAddress)[e.name]().then(function(e){var t="";console.log("typeof txHash => \n",typeof e[0]),t="object"==typeof e[0]?e[0].toString():e[0],a.setMessage(!0,t)})});else{console.log(e);var t={};if(e.inputs){var n=e.inputs,r=Array.isArray(n),o=0;for(n=r?n:n[Symbol.iterator]();;){var i;if(r){if(o>=n.length)break;i=n[o++]}else{if((o=n.next()).done)break;i=o.value}t[i.name]=""}}a.setState({todoFunctionAbi:e,open:!0,deploydata:t})}},a.handleClose=function(){a.setState({open:!1})},a.setMessage=function(e,t){console.log(e,typeof t),e?a.setState({messageIsOpen:e,messageText:t}):a.setState({messageIsOpen:e})},a.SetInput=function(e,t){var n=a.state.deploydata;n[e]=t.target.value,a.setState({deploydata:n})},a.delpoyContract=function(){console.log("this.state.deploydata:",a.state.deploydata);var e=a.state.todoFunctionAbi,t=Object.values(a.state.deploydata);window.ethereum.enable().then(function(e){console.log(e)}),a.handleClose(),fe.a.accounts().then(function(n){var r=fe.a.contract(a.state.contractabi).at(a.props.contractAddress);r[e.name].apply(r,t.concat([{from:n[0]},function(e,t){if(e)console.log("error:",e);else{console.log("result:",t);var n="";console.log("typeof txHash => \n",typeof t[0]),n="object"==typeof t[0]?t[0].toString():t[0],a.setMessage(!0,n)}}]))})},a.delpoyContractt=function(){var e=Object.values(a.state.deploydata);window.ethereum.enable().then(function(e){console.log(e)}),console.log(a.state.deploydata),fe.a.accounts().then(function(t){var n=fe.a.contract(a.state.contract.abi,a.state.contract.bytecode,{from:t[0],gas:4e6});n.new.apply(n,e.concat([function(e,t){e||a.postDapp(t)}]))})},a.postDapp=function(e){var t={dappName:"",txHash:e,contractInfo:a.props.name,publicAddress:"0x81D723361d4F3e648F2c9c479d88DC6dEBF4fA5f",dappChain:"kovan"};p()(c.a+"/api/dapp",{body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"}).then(function(e){return e.json()}).then(function(t){t.id&&Object(m.b)("/dapp/deployed/"+e)})},a.state={open:!1,messageIsOpen:!1,messageText:"",contractabi:[],inputlist:[],deploydata:{},askapi:[],writeapi:[],todoFunctionAbi:{},transferJson:{}},a}r()(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this;console.log(this.props.contractName),console.log(this.props.contractAddress),p()(c.a+"/api/chain/abi?apiname="+this.props.contractName).then(function(e){return e.json()}).then(function(t){if(console.log(t.data),0===t.code){var a=[],n=[],r=t.data.abi,o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var c;if(o){if(i>=r.length)break;c=r[i++]}else{if((i=r.next()).done)break;c=i.value}var s=c;"function"===s.type&&(!0===s.constant?a.push(s):n.push(s))}console.log(n),console.log(a),e.setState({writeapi:n,askapi:a,contractabi:t.data.abi,transferJson:t.data.translate})}}).catch(function(e){console.log("失败")})},a.render=function(){var e=this,t=this.state,a=t.writeapi,n=t.askapi,r=t.todoFunctionAbi,o=t.transferJson,c=this.props.classes,l="";return r.inputs&&(l=r.inputs.map(function(t,a){var n=t.name;return i.a.createElement(d.a,{key:a,item:!0,xs:12},i.a.createElement(b.a,{required:!0,id:"address1",name:n,label:Object(s.b)(o,r.name,n),onChange:e.SetInput.bind(e,n),fullWidth:!0,autoComplete:"billing address-line1"}))})),i.a.createElement("div",{className:c.root},i.a.createElement(S.a,{className:c.drawer,variant:"permanent",classes:{paper:c.drawerPaper}},i.a.createElement("div",{className:c.toolbar}),i.a.createElement(j.a,null,n.map(function(t,a){return i.a.createElement(I.a,{button:!0,key:a},i.a.createElement(D.a,{primary:Object(s.a)(o,t.name),onClick:function(){return e.handleClickOpen(t)}}))})),i.a.createElement(O.a,null),i.a.createElement(j.a,null,a.map(function(t,a){return i.a.createElement(I.a,{button:!0,key:a},i.a.createElement(D.a,{primary:Object(s.a)(o,t.name),onClick:function(){return e.handleClickOpen(t)}}))}))),i.a.createElement("main",{className:c.content},i.a.createElement("div",{className:c.toolbar}),i.a.createElement(g.a,{paragraph:!0},i.a.createElement(ge,null))),i.a.createElement(G.a,{className:c.dialog,open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},i.a.createElement(Z.a,{id:"form-dialog-title"},"方法名称:",Object(s.a)(o,r.name)," "),i.a.createElement(Q.a,null,i.a.createElement(X.a,null,"调用此方法将触发区块链钱包做签名，请慎重操作"),l),i.a.createElement(U.a,null,i.a.createElement(E.a,{onClick:this.handleClose,color:"primary"},"Cancel"),i.a.createElement(E.a,{onClick:function(){return e.delpoyContract()},color:"primary"},"submit"))),i.a.createElement(R,{messageIsOpen:this.state.messageIsOpen,messageText:this.state.messageText,setMessage:function(t){return e.setMessage(t)}}))},t}(i.a.Component);be.propTypes={classes:x.a.object.isRequired};t.a=w()(function(e){return{paper:{maxWidth:"550px",margin:"auto",marginTop:12*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:5*e.spacing.unit+"px "+5*e.spacing.unit+"px "+3*e.spacing.unit+"px"},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit},root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},content:{flexGrow:1,padding:3*e.spacing.unit},toolbar:e.mixins.toolbar,dialog:{minWidth:"600px",margin:"auto"}}})(be)}}]);
//# sourceMappingURL=component---src-pages-dapp-js-085cd455dcdb590733e8.js.map