(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{245:function(e,t,a){"use strict";a.r(t);a(320);var n=a(9),r=a.n(n),o=(a(54),a(0)),i=a.n(o),s=(a(546),a(258)),c=(a(288),a(262)),u=a.n(c),l=a(250),m=a.n(l),d=a(1),p=a.n(d),h=a(113),f=a.n(h),g=a(255),v=a.n(g),E=(a(267),a(275)),w=function(e){function t(){var t;return(t=e.call(this)||this).handleChange=function(e){var a=e.target.value;t.setState({username:a})},t.handleSubmit=function(e){e.target;console.log(t.state.user);var a=t.state,n=a.auth,r=a.user,o=a.username;t.setState({loading:!0}),u()(s.a+"/api/users/"+r.id,{body:JSON.stringify({username:o}),headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"},method:"PATCH"}).then(function(e){return e.json()}).then(function(e){return t.setState({loading:!1,user:e})}).catch(function(e){window.alert(e),t.setState({loading:!1})})},t.state={loading:!1,user:null,username:"",auth:"",uid:"",address:""},t}r()(t,e);var a=t.prototype;return a.componentDidMount=function(){var e,t=this,a="";if(localStorage.getItem("userinfo")){var n=JSON.parse(localStorage.getItem("userinfo"));e=n.auth.accessToken,a=n.id,this.setState({auth:e,address:n.address,uid:a}),console.log("\n auth: ",e)}u()(s.a+"/api/users/"+a,{headers:{Authorization:"Bearer "+e}}).then(function(e){return e.json()}).then(function(e){t.setState({user:e}),console.log(e)}).catch(window.alert)},a.render=function(){var e=this.props.classes,t=this.state,a=t.auth,n=(t.loading,t.user),r=t.address,o=n&&n.username;return o&&console.log("username:",o),i.a.createElement(E.a,null,i.a.createElement("div",{style:{minHeight:"600px",maxWidth:"700px",wordWrap:"break-word",margin:"auto",marginTop:"100px"}},i.a.createElement(v.a,{className:e.root},i.a.createElement(m.a,{variant:"h5",component:"h3"},"用户名:"),o?i.a.createElement("p",null,o):i.a.createElement("p",null,"'未设置'")),i.a.createElement(v.a,{className:e.root},i.a.createElement(m.a,{variant:"h5",component:"h3"},"地址:"),i.a.createElement(m.a,{type:"body1"},r)),i.a.createElement(v.a,{className:e.root},i.a.createElement(m.a,{variant:"h5",component:"h3"},"api-key:"),i.a.createElement(m.a,{type:"body1"},a.toString()))))},t}(i.a.Component);w.propTypes={classes:p.a.object.isRequired},t.default=f()(function(e){return{root:Object.assign({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,wordWrap:"break-word",marginTop:"10px",margin:"20px"})}})(w)},258:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n="https://api.binstd.com"},267:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(1),i=a.n(o),s=a(74),c=a(323),u=a.n(c),l=a(324),m=a.n(l),d=a(250),p=a.n(d),h=a(257),f=a.n(h),g=a(291),v=a.n(g);function E(e){var t=e.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(u.a,{position:"static"},r.a.createElement(m.a,null,r.a.createElement(v.a,{className:t.menuButton,color:"inherit","aria-label":"Menu"}),r.a.createElement(p.a,{variant:"h6",color:"inherit",className:t.grow},r.a.createElement(f.a,{color:"inherit"},"首页"),r.a.createElement(f.a,{color:"inherit"},"API")),r.a.createElement(f.a,{color:"inherit"},"登陆"))))}E.propTypes={classes:i.a.object.isRequired},t.a=Object(s.withStyles)({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20}})(E)},275:function(e,t,a){"use strict";a(322);var n=a(0),r=a.n(n),o=a(1),i=a.n(o),s=a(118),c=a.n(s),u=a(117),l=a.n(u),m=a(74),d=a(267),p=Object(m.createMuiTheme)({palette:{primary:{light:"#2196f3",main:"#2196f3",dark:"#2196f3",contrastText:"#fff"},secondary:{light:"#ff7961",main:"#f44336",dark:"#ba000d",contrastText:"#000"}},typography:{useNextVariants:!0},shadows:Array(25).fill("none")}),h=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,null),r.a.createElement(c.a,{theme:p},r.a.createElement(d.a,null),t))};h.propTypes={children:i.a.node.isRequired},t.a=h},288:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r});var n=function(e,t){return e[t]?(console.log("jsonData[name].value",e[t].value),e[t].value):t},r=function(e,t,a){return console.log(e,t,a),e[t]&&e[t].inputs&&e[t].inputs[a]?e[t].inputs[a]:a}}}]);
//# sourceMappingURL=component---src-pages-userinfo-js-d1e51f005bcbf5882e8e.js.map