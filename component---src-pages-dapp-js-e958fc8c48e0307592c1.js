(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{247:function(e,t,a){"use strict";a.r(t);var n,r=a(9),o=a.n(r),i=a(0),s=a.n(i),c=a(22),l=(a(325),a(328),a(293),a(123),a(77),a(330),a(258)),p=a(262),m=a.n(p),u=a(367);"undefined"!=typeof window&&(n=new u(window.ethereum||new u.HttpProvider("https://ropsten.infura.io/v3/0045c2ce288a4e649a8f39f3d19446b4")));var d=a(288),h=a(259),f=a.n(h),g=a(250),b=a.n(g),y=a(310),E=a.n(y),v=a(257),x=a.n(v),k=a(1),w=a.n(k),C=a(113),S=a.n(C),T=a(255),j=a.n(T),N=function(e){function t(t){var a;return(a=e.call(this,t)||this).SetInput=function(e,t){var n=a.state.deploydata;n[e]=t.target.value,a.setState({deploydata:n})},a.delpoyContract=function(){var e=Object.values(a.state.deploydata);window.ethereum.enable().then(function(e){console.log(e)}),console.log(a.state.deploydata),n.accounts().then(function(t){var r=n.contract(a.state.contract.abi,a.state.contract.bytecode,{from:t[0],gas:4e6});r.new.apply(r,e.concat([function(e,t){e||a.postDapp(t)}]))})},a.postDapp=function(e){var t={dappName:"",txHash:e,contractInfo:a.props.name,publicAddress:a.state.userinfo.address,dappChain:a.state.network};console.log(t),m()(l.a+"/api/dapp",{body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"}).then(function(e){return e.json()}).then(function(t){t.id&&Object(c.b)("/dapp/deployed/"+e)})},a.state={contract:{},inputlist:[],deploydata:{},userinfo:{},network:"",transferJson:{}},a}o()(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this,t="";if(n.net_version().then(function(a){switch(a){case"1":console.log("This is mainnet"),t="eth_main";break;case"2":console.log("This is the deprecated Morden test network."),t="eth_morden";break;case"3":console.log("This is the ropsten test network."),t="eth_ropsten";break;case"4":console.log("This is the Rinkeby test network."),t="eth_rinkeby";break;case"42":console.log("This is the Kovan test network."),t="eth_kovan";break;default:console.log("This is an unknown network."),t="eth_unknown"}e.setState({network:t})}),localStorage.getItem("userinfo")){var a=JSON.parse(localStorage.getItem("userinfo"));this.setState({userinfo:a})}m()(l.a+"/api/chain/abi?apiname="+this.props.name).then(function(e){return e.json()}).then(function(t){var a={};if(0===t.code){var n=[],r=t.data.abi,o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var s;if(o){if(i>=r.length)break;s=r[i++]}else{if((i=r.next()).done)break;s=i.value}var c=s;"constructor"===c.type&&(n=c.inputs)}var l=n,p=Array.isArray(l),m=0;for(l=p?l:l[Symbol.iterator]();;){var u;if(p){if(m>=l.length)break;u=l[m++]}else{if((m=l.next()).done)break;u=m.value}a[u.name]=""}e.setState({contract:t.data,transferJson:t.data.translate,inputlist:n,deploydata:a})}}).catch(function(e){console.log("失败")})},a.render=function(){var e=this,t=this.state,a=t.inputlist,n=t.transferJson,r=this.props.classes,o=a.map(function(t,a){var r=t.name;return s.a.createElement(f.a,{key:a,item:!0,xs:12},s.a.createElement(E.a,{required:!0,id:"address1",name:r,label:Object(d.b)(n,"constructor",r),onChange:e.SetInput.bind(e,r),fullWidth:!0,autoComplete:"billing address-line1"}))});return s.a.createElement("div",{style:{minHeight:"600px"}},s.a.createElement(j.a,{className:r.paper},s.a.createElement(b.a,{variant:"h6",gutterBottom:!0},"合约部署"),s.a.createElement(f.a,{container:!0,spacing:24},o),s.a.createElement(x.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:r.submit,onClick:function(){return e.delpoyContract()}},"确认")))},t}(s.a.Component);N.propTypes={classes:w.a.object.isRequired};var O=S()(function(e){return{paper:{maxWidth:"550px",margin:"auto",marginTop:12*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:5*e.spacing.unit+"px "+5*e.spacing.unit+"px "+3*e.spacing.unit+"px"},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}})(N),A=a(273),I=a.n(A),D=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={dapplist:[]},a}o()(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this;m()(l.a+"/api/dapp/"+this.props.address+"?chain=eth_ropsten").then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({dapplist:t})}).catch(function(e){console.log("失败")})},a.render=function(){var e=this.state.dapplist,t=this.props.classes,a=e.map(function(e,a){console.log(e);var n=e.contractInfo,r=e.txHash,o=e.contractAddress;return s.a.createElement("div",{key:a,className:t.root},s.a.createElement(j.a,{className:t.paper},s.a.createElement(f.a,{container:!0,spacing:24},s.a.createElement(f.a,{item:!0},s.a.createElement(I.a,{className:t.image,onClick:function(){return Object(c.b)("/dapp/manage/"+n+"/"+o)}},s.a.createElement("img",{className:t.img,alt:"complex",src:"https://smartz.io/static/img/erc-20.png"}))),s.a.createElement(f.a,{item:!0,xs:8,sm:!0,container:!0},s.a.createElement(f.a,{item:!0,xs:!0,container:!0,direction:"column"},s.a.createElement(f.a,{item:!0,xs:!0,style:{maxWidth:"500px",wordWrap:"break-word"}},s.a.createElement(b.a,{gutterBottom:!0,variant:"subtitle1"},n),"合约地址:",s.a.createElement(b.a,{color:"textSecondary"},s.a.createElement("a",{href:"http://localhost:8000",color:"textSecondary",target:"_blank",rel:"noopener noreferrer"},r))))))))});return s.a.createElement("div",{style:{minHeight:"600px",marginTop:"80px"}},a)},t}(s.a.Component);D.propTypes={classes:w.a.object.isRequired};var W=S()(function(e){return{root:{marginTop:10},paper:{padding:2*e.spacing.unit,margin:"auto",maxWidth:660,height:140},image:{maxwidth:"80px",maxheight:"80px"},img:{margin:"auto",display:"block",maxWidth:"80px",maxHeight:"80px"}}})(D),M=(a(320),a(524)),H=a.n(M),J=a(353),_=a.n(J),q=a(531),F=a.n(q),R=a(526),B=a.n(R),z=a(529),P=a.n(z),G=a(74),K=a(504),L=a.n(K),V=a(291),Q=a.n(V),U=a(512),X=a.n(U);function Y(e){var t=e.classes,a=e.setMessage,n=e.messageText,r=e.messageIsOpen;return s.a.createElement("div",null,s.a.createElement(L.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:r,autoHideDuration:6e3,onClose:function(){return a(!1)},ContentProps:{"aria-describedby":"message-id"},message:s.a.createElement("span",{id:"message-id"},n),action:[s.a.createElement(x.a,{key:"undo",color:"secondary",size:"small",onClick:function(){return a(!1)}},"已读"),s.a.createElement(Q.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:function(){return a(!1)}},s.a.createElement(X.a,null))]}))}Y.propTypes={classes:w.a.object.isRequired};var Z=Object(G.withStyles)(function(e){return{close:{padding:e.spacing.unit/2}}})(Y),$=a(533),ee=a.n($),te=a(541),ae=a.n(te),ne=a(537),re=a.n(ne),oe=a(539),ie=a.n(oe),se=a(535),ce=a.n(se),le=a(514),pe=a.n(le),me=a(522),ue=a.n(me),de=a(520),he=a.n(de),fe=a(516),ge=a.n(fe),be=a(518),ye=a.n(be),Ee=0;function ve(e,t,a,n,r){return{id:Ee+=1,name:e,calories:t,fat:a,carbs:n,protein:r}}var xe=[ve("Frozen yoghurt",159,6,24,4),ve("Ice cream sandwich",237,9,37,4.3)],ke=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={dapplist:[]},a}o()(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this;m()(l.a+"/api/dapp/"+this.props.address+"?chain=eth_ropsten").then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({dapplist:t})}).catch(function(e){console.log("失败")})},a.render=function(){var e=this.props.classes;return s.a.createElement("div",{style:{minHeight:"600px",marginTop:"10px"}},s.a.createElement("div",{className:e.root},s.a.createElement(j.a,{className:e.paper},s.a.createElement(f.a,{container:!0,spacing:24},s.a.createElement(f.a,{item:!0,xs:8,sm:!0,container:!0},s.a.createElement(f.a,{item:!0,xs:!0,container:!0,direction:"column"},s.a.createElement(f.a,{item:!0,xs:!0,style:{maxWidth:"400px"}},s.a.createElement(b.a,{gutterBottom:!0,variant:"subtitle1"},"我是合约11"),"合约地址:",s.a.createElement(b.a,{color:"textSecondary"},s.a.createElement("a",{href:"http://localhost:8000",color:"textSecondary",target:"_blank",rel:"noopener noreferrer"},"luz243434343")))))))),s.a.createElement("div",{className:e.root},s.a.createElement(j.a,{className:e.paper},s.a.createElement(f.a,{container:!0,spacing:24},s.a.createElement(f.a,{item:!0,xs:8,sm:!0,container:!0},s.a.createElement(f.a,{item:!0,xs:!0,container:!0,direction:"column"},s.a.createElement(f.a,{item:!0,xs:!0,style:{}},s.a.createElement(b.a,{gutterBottom:!0,variant:"subtitle1"},"方法名称: 转账"),"hashhashhashhashhashhashhashhash","输入:",s.a.createElement(pe.a,{className:e.table},s.a.createElement(ge.a,null,s.a.createElement(ye.a,null,s.a.createElement(he.a,null,"参数名"),s.a.createElement(he.a,{numeric:!0},"值"))),s.a.createElement(ue.a,null,xe.map(function(e){return s.a.createElement(ye.a,{key:e.id},s.a.createElement(he.a,{component:"th",scope:"row"},e.name),s.a.createElement(he.a,{numeric:!0},e.calories))}))),"结果:",s.a.createElement(pe.a,{className:e.table},s.a.createElement(ge.a,null,s.a.createElement(ye.a,null,s.a.createElement(he.a,null,"参数名"),s.a.createElement(he.a,{numeric:!0},"值"))),s.a.createElement(ue.a,null,xe.map(function(e){return s.a.createElement(ye.a,{key:e.id},s.a.createElement(he.a,{component:"th",scope:"row"},e.name),s.a.createElement(he.a,{numeric:!0},e.calories))}))))))))))},t}(s.a.Component);ke.propTypes={classes:w.a.object.isRequired};var we=S()(function(e){return{root:{marginTop:10},paper:{padding:2*e.spacing.unit,margin:"auto",maxWidth:600},image:{width:"100px",height:"100px"},img:{margin:"auto",display:"block",maxWidth:"80px",maxHeight:"80px"},table:{width:"90%",margin:"5px auto"}}})(ke),Ce=function(e){function t(t){var a;return(a=e.call(this,t)||this).handleClickOpen=function(e){if(0===e.inputs.length)console.log(e),n.accounts().then(function(t){n.contract(a.state.contractabi).at(a.props.contractAddress)[e.name]().then(function(e){var t="";console.log("typeof txHash => \n",typeof e[0]),t="object"==typeof e[0]?e[0].toString():e[0],a.setMessage(!0,t)})});else{console.log(e);var t={};if(e.inputs){var r=e.inputs,o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var s;if(o){if(i>=r.length)break;s=r[i++]}else{if((i=r.next()).done)break;s=i.value}t[s.name]=""}}a.setState({todoFunctionAbi:e,open:!0,deploydata:t})}},a.handleClose=function(){a.setState({open:!1})},a.setMessage=function(e,t){console.log(e,typeof t),e?a.setState({messageIsOpen:e,messageText:t}):a.setState({messageIsOpen:e})},a.SetInput=function(e,t){var n=a.state.deploydata;n[e]=t.target.value,a.setState({deploydata:n})},a.delpoyContract=function(){console.log("this.state.deploydata:",a.state.deploydata);var e=a.state.todoFunctionAbi,t=Object.values(a.state.deploydata);window.ethereum.enable().then(function(e){console.log(e)}),a.handleClose(),n.accounts().then(function(r){var o=n.contract(a.state.contractabi).at(a.props.contractAddress);o[e.name].apply(o,t.concat([{from:r[0]},function(e,t){if(e)console.log("error:",e);else{console.log("result:",t);var n="";console.log("typeof txHash => \n",typeof t[0]),n="object"==typeof t[0]?t[0].toString():t[0],a.setMessage(!0,n)}}]))})},a.delpoyContractt=function(){var e=Object.values(a.state.deploydata);window.ethereum.enable().then(function(e){console.log(e)}),console.log(a.state.deploydata),n.accounts().then(function(t){var r=n.contract(a.state.contract.abi,a.state.contract.bytecode,{from:t[0],gas:4e6});r.new.apply(r,e.concat([function(e,t){e||a.postDapp(t)}]))})},a.postDapp=function(e){var t={dappName:"",txHash:e,contractInfo:a.props.name,publicAddress:"0x81D723361d4F3e648F2c9c479d88DC6dEBF4fA5f",dappChain:"kovan"};m()(l.a+"/api/dapp",{body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"}).then(function(e){return e.json()}).then(function(t){t.id&&Object(c.b)("/dapp/deployed/"+e)})},a.state={open:!1,messageIsOpen:!1,messageText:"",contractabi:[],inputlist:[],deploydata:{},askapi:[],writeapi:[],todoFunctionAbi:{},transferJson:{}},a}o()(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this;console.log(this.props.contractName),console.log(this.props.contractAddress),m()(l.a+"/api/chain/abi?apiname="+this.props.contractName).then(function(e){return e.json()}).then(function(t){if(console.log(t.data),0===t.code){var a=[],n=[],r=t.data.abi,o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var s;if(o){if(i>=r.length)break;s=r[i++]}else{if((i=r.next()).done)break;s=i.value}var c=s;"function"===c.type&&(!0===c.constant?a.push(c):n.push(c))}console.log(n),console.log(a),e.setState({writeapi:n,askapi:a,contractabi:t.data.abi,transferJson:t.data.translate})}}).catch(function(e){console.log("失败")})},a.render=function(){var e=this,t=this.state,a=t.writeapi,n=t.askapi,r=t.todoFunctionAbi,o=t.transferJson,i=this.props.classes,c="";return r.inputs&&(c=r.inputs.map(function(t,a){var n=t.name;return s.a.createElement(f.a,{key:a,item:!0,xs:12},s.a.createElement(E.a,{required:!0,id:"address1",name:n,label:Object(d.b)(o,r.name,n),onChange:e.SetInput.bind(e,n),fullWidth:!0,autoComplete:"billing address-line1"}))})),s.a.createElement("div",{className:i.root},s.a.createElement(H.a,{className:i.drawer,variant:"permanent",classes:{paper:i.drawerPaper}},s.a.createElement("div",{className:i.toolbar}),s.a.createElement(_.a,null,n.map(function(t,a){return s.a.createElement(B.a,{button:!0,key:a},s.a.createElement(P.a,{primary:Object(d.a)(o,t.name),onClick:function(){return e.handleClickOpen(t)}}))})),s.a.createElement(F.a,null),s.a.createElement(_.a,null,a.map(function(t,a){return s.a.createElement(B.a,{button:!0,key:a},s.a.createElement(P.a,{primary:Object(d.a)(o,t.name),onClick:function(){return e.handleClickOpen(t)}}))}))),s.a.createElement("main",{className:i.content},s.a.createElement("div",{className:i.toolbar}),s.a.createElement(b.a,{paragraph:!0},s.a.createElement(we,null))),s.a.createElement(ee.a,{className:i.dialog,open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},s.a.createElement(ce.a,{id:"form-dialog-title"},"方法名称:",Object(d.a)(o,r.name)," "),s.a.createElement(re.a,null,s.a.createElement(ie.a,null,"调用此方法将触发区块链钱包做签名，请慎重操作"),c),s.a.createElement(ae.a,null,s.a.createElement(x.a,{onClick:this.handleClose,color:"primary"},"Cancel"),s.a.createElement(x.a,{onClick:function(){return e.delpoyContract()},color:"primary"},"submit"))),s.a.createElement(Z,{messageIsOpen:this.state.messageIsOpen,messageText:this.state.messageText,setMessage:function(t){return e.setMessage(t)}}))},t}(s.a.Component);Ce.propTypes={classes:w.a.object.isRequired};var Se=S()(function(e){return{paper:{maxWidth:"550px",margin:"auto",marginTop:12*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:5*e.spacing.unit+"px "+5*e.spacing.unit+"px "+3*e.spacing.unit+"px"},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit},root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},content:{flexGrow:1,padding:3*e.spacing.unit},toolbar:e.mixins.toolbar,dialog:{minWidth:"600px",margin:"auto"}}})(Ce),Te=a(275),je=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t.prototype.render=function(){return s.a.createElement("div",null,s.a.createElement(Te.a,null,s.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"0px 1.0875rem 1.45rem",paddingTop:0}},s.a.createElement(c.a,null,s.a.createElement(O,{path:"/dapp/create/:name/"}),s.a.createElement(Se,{path:"/dapp/manage/:contractName/:contractAddress/"}),s.a.createElement(W,{path:"/dapp/:address/"})))))},t}(i.Component);t.default=je},258:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n="https://api.binstd.com"},267:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(1),i=a.n(o),s=a(74),c=a(323),l=a.n(c),p=a(324),m=a.n(p),u=a(250),d=a.n(u),h=a(257),f=a.n(h),g=a(291),b=a.n(g);function y(e){var t=e.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(l.a,{position:"static"},r.a.createElement(m.a,null,r.a.createElement(b.a,{className:t.menuButton,color:"inherit","aria-label":"Menu"}),r.a.createElement(d.a,{variant:"h6",color:"inherit",className:t.grow},r.a.createElement(f.a,{color:"inherit"},"首页"),r.a.createElement(f.a,{color:"inherit"},"API")),r.a.createElement(f.a,{color:"inherit"},"登陆"))))}y.propTypes={classes:i.a.object.isRequired},t.a=Object(s.withStyles)({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20}})(y)},275:function(e,t,a){"use strict";a(322);var n=a(0),r=a.n(n),o=a(1),i=a.n(o),s=a(118),c=a.n(s),l=a(117),p=a.n(l),m=a(74),u=a(267),d=Object(m.createMuiTheme)({palette:{primary:{light:"#2196f3",main:"#2196f3",dark:"#2196f3",contrastText:"#fff"},secondary:{light:"#ff7961",main:"#f44336",dark:"#ba000d",contrastText:"#000"}},typography:{useNextVariants:!0},shadows:Array(25).fill("none")}),h=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null),r.a.createElement(c.a,{theme:d},r.a.createElement(u.a,null),t))};h.propTypes={children:i.a.node.isRequired},t.a=h},288:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r});var n=function(e,t){return e[t]?(console.log("jsonData[name].value",e[t].value),e[t].value):t},r=function(e,t,a){return console.log(e,t,a),e[t]&&e[t].inputs&&e[t].inputs[a]?e[t].inputs[a]:a}},375:function(e,t){}}]);
//# sourceMappingURL=component---src-pages-dapp-js-e958fc8c48e0307592c1.js.map