{"version":3,"sources":["webpack:///./src/pages/userinfo.js","webpack:///./src/lib/config.js","webpack:///./src/components/Mamenu.js","webpack:///./src/components/MaLayout.js","webpack:///./src/lib/translate.js"],"names":["UserinfoPage","_this","_React$Component","call","this","handleChange","_ref","value","target","setState","username","handleSubmit","_ref2","console","log","state","user","_this$state","auth","loading","fetch","server_url","id","body","JSON","stringify","headers","Authorization","Content-Type","method","then","response","json","catch","err","window","alert","uid","address","componentDidMount","_this2","localStorage","getItem","userinfo","parse","accessToken","render","classes","props","_this$state2","react__WEBPACK_IMPORTED_MODULE_3___default","a","createElement","_components_MaLayout__WEBPACK_IMPORTED_MODULE_13__","style","minHeight","maxWidth","wordWrap","margin","marginTop","_material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_11___default","className","root","_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_8___default","variant","component","type","toString","React","Component","propTypes","PropTypes","object","isRequired","withStyles","theme","Object","assign","mixins","gutters","paddingTop","spacing","unit","paddingBottom","__webpack_require__","d","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_2__","_material_ui_core_AppBar__WEBPACK_IMPORTED_MODULE_3__","_material_ui_core_AppBar__WEBPACK_IMPORTED_MODULE_3___default","_material_ui_core_Toolbar__WEBPACK_IMPORTED_MODULE_4__","_material_ui_core_Toolbar__WEBPACK_IMPORTED_MODULE_4___default","_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_5__","_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_5___default","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_6__","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_6___default","_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_7__","_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_7___default","ButtonAppBar","position","menuButton","color","aria-label","grow","flexGrow","marginLeft","marginRight","createMuiTheme","palette","primary","light","main","dark","contrastText","secondary","typography","useNextVariants","shadows","Array","fill","MaLayout","children","react__WEBPACK_IMPORTED_MODULE_1___default","Fragment","_material_ui_core_CssBaseline__WEBPACK_IMPORTED_MODULE_4___default","_material_ui_core_styles_MuiThemeProvider__WEBPACK_IMPORTED_MODULE_3___default","_Mamenu__WEBPACK_IMPORTED_MODULE_6__","node","transFunc","transInput","jsonData","funcName","inputName","inputs"],"mappings":"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","file":"component---src-pages-userinfo-js-d1e51f005bcbf5882e8e.js","sourcesContent":["import React from 'react'\nimport { observer } from 'mobx-react';\n\nimport { server_url } from '../lib/config';\nimport { transInput } from '../lib/translate';\n\nimport fetch from 'node-fetch';\n\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\n\nimport Button from '@material-ui/core/Button';\nimport PropTypes from 'prop-types';\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nimport Paper from '@material-ui/core/Paper';\nimport Mamenu from '../components/Mamenu';\nimport MaLayout from '../components/MaLayout'\n\n\nconst styles = theme => ({\n    root: {\n      ...theme.mixins.gutters(),\n      paddingTop: theme.spacing.unit * 2,\n      paddingBottom: theme.spacing.unit * 2,\n      wordWrap: 'break-word',\n      marginTop:'10px',\n      margin:'20px'\n    },\n});\n\nclass UserinfoPage extends React.Component {\n\n    constructor() {\n        super();\n        this.state = {\n            loading: false,\n            user: null,\n            username: '',\n            auth: '',\n            uid: '',\n            address: ''\n        };\n    }\n\n    componentDidMount() {\n        let auth, uid = '';\n        if (localStorage.getItem(\"userinfo\")) {\n            let userinfo = JSON.parse(localStorage.getItem(\"userinfo\"));\n            auth = userinfo.auth.accessToken;\n            uid = userinfo.id;\n            this.setState({\n                auth,\n                address: userinfo.address,\n                uid\n            });\n\n            console.log('\\n auth: ', auth);\n        }\n\n        fetch(`${server_url}/api/users/${uid}`, {\n            headers: {\n                Authorization: `Bearer ${auth}`\n            }\n        })\n            .then(response => response.json())\n            .then(user => {\n                this.setState({ user });\n                console.log(user);\n            }).catch(window.alert);\n\n    }\n\n\n    handleChange = ({ target: { value } }) => {\n        this.setState({ username: value });\n    };\n\n    handleSubmit = ({ target }) => {\n        console.log(this.state.user);\n        const { auth, user, username } = this.state;\n        this.setState({ loading: true });\n        fetch(`${server_url}/api/users/${user.id}`, {\n            body: JSON.stringify({ username }),\n            headers: {\n                Authorization: `Bearer ${auth}`,\n                'Content-Type': 'application/json'\n            },\n            method: 'PATCH'\n        }).then(response => response.json())\n            .then(user => this.setState({ loading: false, user }))\n            .catch(err => {\n                window.alert(err);\n                this.setState({ loading: false });\n            });\n    };\n\n\n    render() {\n        // let { inputlist,transferJson } = this.state;\n        const { classes } = this.props;\n        const { auth, loading, user, address } = this.state;\n        const username = user && user.username;\n        if (username) {\n            console.log('username:', username);\n        }\n\n        return (\n            <MaLayout>\n                {/* word-wrap: break-word  */}\n                <div style={{ minHeight: '600px',maxWidth:'700px',wordWrap: 'break-word',margin:'auto',marginTop:'100px' }}>\n                    <Paper className={classes.root} >\n                        <Typography variant=\"h5\" component=\"h3\">\n                           用户名:\n                        </Typography>\n\n                        {/* <Typography  type=\"body1\" > */}\n                  \n                        {username ? <p>{username}</p> : <p>'未设置'</p>}\n                        {/* </Typography> */}\n                    </Paper>\n                    <Paper className={classes.root} >\n                        <Typography variant=\"h5\" component=\"h3\">\n                          地址:\n                        </Typography>\n\n                        <Typography  type=\"body1\" >\n                            {address} \n                        </Typography>\n                    </Paper>\n                    <Paper className={classes.root} >\n                        <Typography variant=\"h5\" component=\"h3\">\n                           api-key:\n                        </Typography>\n\n                        <Typography  type=\"body1\" >\n                            {auth.toString()}\n                        </Typography>\n                    </Paper>\n                 \n                   \n                    \n                    {/* {auth.toString()} */}\n                </div>\n            </MaLayout>\n        );\n    }\n}\n\nUserinfoPage.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(UserinfoPage);\n\n\n\n// import React from 'react';\n// import PropTypes from 'prop-types';\n// import { withStyles } from '@material-ui/core/styles';\n// import Paper from '@material-ui/core/Paper';\n// import Typography from '@material-ui/core/Typography';\n\n\n// function PaperSheet(props) {\n//   const { classes } = props;\n\n//   return (\n//     <div>\n//       <Paper className={classes.root} elevation={1}>\n//         <Typography variant=\"h5\" component=\"h3\">\n//           This is a sheet of paper.\n//         </Typography>\n//         <Typography component=\"p\">\n//           Paper can be used to build surface or other elements for your application.\n//         </Typography>\n//       </Paper>\n//     </div>\n//   );\n// }\n\n// PaperSheet.propTypes = {\n//   classes: PropTypes.object.isRequired,\n// };\n\n// export default withStyles(styles)(PaperSheet);\n","export const server_url = 'https://api.binstd.com';\n\n// export const server_url = 'http://127.0.0.1:3000';","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\n\n\nconst styles = {\n  root: {\n    flexGrow: 1,\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20,\n  },\n};\n\nfunction ButtonAppBar(props) {\n  const { classes } = props;\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <IconButton className={classes.menuButton} color=\"inherit\" aria-label=\"Menu\">\n            {/* <MenuIcon /> */}\n          </IconButton>\n          <Typography variant=\"h6\" color=\"inherit\" className={classes.grow}>\n          <Button color=\"inherit\">首页</Button>\n          <Button color=\"inherit\">API</Button>\n          </Typography>\n          <Button color=\"inherit\">登陆</Button>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n}\n\nButtonAppBar.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(ButtonAppBar);\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\n\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { createMuiTheme } from '@material-ui/core/styles';\n\n\nimport Mamenu from './Mamenu';\n\nconst theme = createMuiTheme({\n    palette: {\n      primary: {\n        light: '#2196f3',\n        main: '#2196f3',\n        dark: '#2196f3',\n        contrastText: '#fff',\n      },\n      secondary: {\n        light: '#ff7961',\n        main: '#f44336',\n        dark: '#ba000d',\n        contrastText: '#000',\n      },\n    },\n    typography: {\n        useNextVariants: true,\n    },\n    shadows: Array(25).fill('none')\n});\n\nconst MaLayout = ({ children }) => (\n    <React.Fragment>\n        <CssBaseline />\n        <MuiThemeProvider theme={theme}>\n            <Mamenu/>\n            {children}\n        </MuiThemeProvider>\n    </React.Fragment>\n)\n\nMaLayout.propTypes = {\n  children: PropTypes.node.isRequired\n}\n\nexport default MaLayout\n\n","var transFunc  = (jsonData, funcName) => {\n    if(jsonData[funcName]){\n        console.log('jsonData[name].value',jsonData[funcName].value);\n        return jsonData[funcName].value;\n    } else {\n        return funcName;\n    }\n}\n\nvar transInput  = (jsonData, funcName, inputName) => {\n    console.log(jsonData,funcName, inputName);\n    if(!jsonData[funcName]){\n        return inputName;\n    }\n    if(!jsonData[funcName].inputs) {\n        return inputName;\n    } else if (jsonData[funcName].inputs[inputName]) {\n        return jsonData[funcName].inputs[inputName];\n    } else {\n        return inputName;\n    }\n    \n    \n}\n\nexport {transFunc,transInput}"],"sourceRoot":""}