(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{246:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a.n(n),o=a(0),i=a.n(o),s=a(21),c=(a(323),a(326),a(294),a(123),a(77),a(328),a(257)),l=a(262),p=a.n(l),m=a(275),u=a(287),d=a(259),h=a.n(d),f=a(250),g=a.n(f),y=a(312),b=a.n(y),E=a(256),v=a.n(E),x=a(1),k=a.n(x),w=a(113),C=a.n(w),S=a(255),T=a.n(S),j=function(e){function t(t){var a;return(a=e.call(this,t)||this).SetInput=function(e,t){var n=a.state.deploydata;n[e]=t.target.value,a.setState({deploydata:n})},a.delpoyContract=function(){var e=Object.values(a.state.deploydata);window.ethereum.enable().then(function(e){console.log(e)}),console.log(a.state.deploydata),m.a.accounts().then(function(t){var n=m.a.contract(a.state.contract.abi,a.state.contract.bytecode,{from:t[0],gas:4e6});n.new.apply(n,e.concat([function(e,t){e||a.postDapp(t)}]))})},a.postDapp=function(e){var t={dappName:"",txHash:e,contractInfo:a.props.name,publicAddress:a.state.userinfo.address,dappChain:a.state.network};console.log(t),p()(c.a+"/api/dapp",{body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"}).then(function(e){return e.json()}).then(function(t){t.id&&Object(s.b)("/dapp/deployed/"+e)})},a.state={contract:{},inputlist:[],deploydata:{},userinfo:{},network:"",transferJson:{}},a}r()(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this,t="";if(m.a.net_version().then(function(a){switch(a){case"1":console.log("This is mainnet"),t="eth_main";break;case"2":console.log("This is the deprecated Morden test network."),t="eth_morden";break;case"3":console.log("This is the ropsten test network."),t="eth_ropsten";break;case"4":console.log("This is the Rinkeby test network."),t="eth_rinkeby";break;case"42":console.log("This is the Kovan test network."),t="eth_kovan";break;default:console.log("This is an unknown network."),t="eth_unknown"}e.setState({network:t})}),localStorage.getItem("userinfo")){var a=JSON.parse(localStorage.getItem("userinfo"));this.setState({userinfo:a})}p()(c.a+"/api/chain/abi?apiname="+this.props.name).then(function(e){return e.json()}).then(function(t){var a={};if(0===t.code){var n=[],r=t.data.abi,o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var s;if(o){if(i>=r.length)break;s=r[i++]}else{if((i=r.next()).done)break;s=i.value}var c=s;"constructor"===c.type&&(n=c.inputs)}var l=n,p=Array.isArray(l),m=0;for(l=p?l:l[Symbol.iterator]();;){var u;if(p){if(m>=l.length)break;u=l[m++]}else{if((m=l.next()).done)break;u=m.value}a[u.name]=""}e.setState({contract:t.data,transferJson:t.data.translate,inputlist:n,deploydata:a})}}).catch(function(e){console.log("失败")})},a.render=function(){var e=this,t=this.state,a=t.inputlist,n=t.transferJson,r=this.props.classes,o=a.map(function(t,a){var r=t.name;return i.a.createElement(h.a,{key:a,item:!0,xs:12},i.a.createElement(b.a,{required:!0,id:"address1",name:r,label:Object(u.b)(n,"constructor",r),onChange:e.SetInput.bind(e,r),fullWidth:!0,autoComplete:"billing address-line1"}))});return i.a.createElement("div",{style:{minHeight:"600px"}},i.a.createElement(T.a,{className:r.paper},i.a.createElement(g.a,{variant:"h6",gutterBottom:!0},"合约部署"),i.a.createElement(h.a,{container:!0,spacing:24},o),i.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:r.submit,onClick:function(){return e.delpoyContract()}},"确认")))},t}(i.a.Component);j.propTypes={classes:k.a.object.isRequired};var N=C()(function(e){return{paper:{maxWidth:"550px",margin:"auto",marginTop:12*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:5*e.spacing.unit+"px "+5*e.spacing.unit+"px "+3*e.spacing.unit+"px"},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}})(j),O=a(272),A=a.n(O),I=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={dapplist:[]},a}r()(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this;p()(c.a+"/api/dapp/"+this.props.address+"?chain=eth_ropsten").then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({dapplist:t})}).catch(function(e){console.log("失败")})},a.render=function(){var e=this.state.dapplist,t=this.props.classes,a=e.map(function(e,a){console.log(e);var n=e.contractInfo,r=e.txHash,o=e.contractAddress;return i.a.createElement("div",{key:a,className:t.root},i.a.createElement(T.a,{className:t.paper},i.a.createElement(h.a,{container:!0,spacing:24},i.a.createElement(h.a,{item:!0},i.a.createElement(A.a,{className:t.image,onClick:function(){return Object(s.b)("/dapp/manage/"+n+"/"+o)}},i.a.createElement("img",{className:t.img,alt:"complex",src:"https://smartz.io/static/img/erc-20.png"}))),i.a.createElement(h.a,{item:!0,xs:8,sm:!0,container:!0},i.a.createElement(h.a,{item:!0,xs:!0,container:!0,direction:"column"},i.a.createElement(h.a,{item:!0,xs:!0,style:{maxWidth:"500px",wordWrap:"break-word"}},i.a.createElement(g.a,{gutterBottom:!0,variant:"subtitle1"},n),"合约地址:",i.a.createElement(g.a,{color:"textSecondary"},i.a.createElement("a",{href:"http://localhost:8000",color:"textSecondary",target:"_blank",rel:"noopener noreferrer"},r))))))))});return i.a.createElement("div",{style:{minHeight:"600px",marginTop:"80px"}},a)},t}(i.a.Component);I.propTypes={classes:k.a.object.isRequired};var D=C()(function(e){return{root:{marginTop:10},paper:{padding:2*e.spacing.unit,margin:"auto",maxWidth:660,height:140},image:{maxwidth:"80px",maxheight:"80px"},img:{margin:"auto",display:"block",maxWidth:"80px",maxHeight:"80px"}}})(I),W=(a(361),a(527)),M=a.n(W),H=a(354),J=a.n(H),_=a(533),q=a.n(_),F=a(365),R=a.n(F),B=a(531),z=a.n(B),P=a(74),G=a(508),K=a.n(G),L=a(273),V=a.n(L),Q=a(516),U=a.n(Q);function X(e){var t=e.classes,a=e.setMessage,n=e.messageText,r=e.messageIsOpen;return i.a.createElement("div",null,i.a.createElement(K.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:r,autoHideDuration:6e3,onClose:function(){return a(!1)},ContentProps:{"aria-describedby":"message-id"},message:i.a.createElement("span",{id:"message-id"},n),action:[i.a.createElement(v.a,{key:"undo",color:"secondary",size:"small",onClick:function(){return a(!1)}},"已读"),i.a.createElement(V.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:function(){return a(!1)}},i.a.createElement(U.a,null))]}))}X.propTypes={classes:k.a.object.isRequired};var Y=Object(P.withStyles)(function(e){return{close:{padding:e.spacing.unit/2}}})(X),Z=a(535),$=a.n(Z),ee=a(543),te=a.n(ee),ae=a(539),ne=a.n(ae),re=a(541),oe=a.n(re),ie=a(537),se=a.n(ie),ce=a(517),le=a.n(ce),pe=a(525),me=a.n(pe),ue=a(523),de=a.n(ue),he=a(519),fe=a.n(he),ge=a(521),ye=a.n(ge),be=0;function Ee(e,t,a,n,r){return{id:be+=1,name:e,calories:t,fat:a,carbs:n,protein:r}}var ve=[Ee("Frozen yoghurt",159,6,24,4),Ee("Ice cream sandwich",237,9,37,4.3)],xe=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={dapplist:[]},a}r()(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this;p()(c.a+"/api/dapp/"+this.props.address+"?chain=eth_ropsten").then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({dapplist:t})}).catch(function(e){console.log("失败")})},a.render=function(){var e=this.props.classes;return i.a.createElement("div",{style:{minHeight:"600px",marginTop:"10px"}},i.a.createElement("div",{className:e.root},i.a.createElement(T.a,{className:e.paper},i.a.createElement(h.a,{container:!0,spacing:24},i.a.createElement(h.a,{item:!0,xs:8,sm:!0,container:!0},i.a.createElement(h.a,{item:!0,xs:!0,container:!0,direction:"column"},i.a.createElement(h.a,{item:!0,xs:!0,style:{maxWidth:"400px"}},i.a.createElement(g.a,{gutterBottom:!0,variant:"subtitle1"},"我是合约11"),"合约地址:",i.a.createElement(g.a,{color:"textSecondary"},i.a.createElement("a",{href:"http://localhost:8000",color:"textSecondary",target:"_blank",rel:"noopener noreferrer"},"luz243434343")))))))),i.a.createElement("div",{className:e.root},i.a.createElement(T.a,{className:e.paper},i.a.createElement(h.a,{container:!0,spacing:24},i.a.createElement(h.a,{item:!0,xs:8,sm:!0,container:!0},i.a.createElement(h.a,{item:!0,xs:!0,container:!0,direction:"column"},i.a.createElement(h.a,{item:!0,xs:!0,style:{}},i.a.createElement(g.a,{gutterBottom:!0,variant:"subtitle1"},"方法名称: 转账"),"hashhashhashhashhashhashhashhash","输入:",i.a.createElement(le.a,{className:e.table},i.a.createElement(fe.a,null,i.a.createElement(ye.a,null,i.a.createElement(de.a,null,"参数名"),i.a.createElement(de.a,{numeric:!0},"值"))),i.a.createElement(me.a,null,ve.map(function(e){return i.a.createElement(ye.a,{key:e.id},i.a.createElement(de.a,{component:"th",scope:"row"},e.name),i.a.createElement(de.a,{numeric:!0},e.calories))}))),"结果:",i.a.createElement(le.a,{className:e.table},i.a.createElement(fe.a,null,i.a.createElement(ye.a,null,i.a.createElement(de.a,null,"参数名"),i.a.createElement(de.a,{numeric:!0},"值"))),i.a.createElement(me.a,null,ve.map(function(e){return i.a.createElement(ye.a,{key:e.id},i.a.createElement(de.a,{component:"th",scope:"row"},e.name),i.a.createElement(de.a,{numeric:!0},e.calories))}))))))))))},t}(i.a.Component);xe.propTypes={classes:k.a.object.isRequired};var ke=C()(function(e){return{root:{marginTop:10},paper:{padding:2*e.spacing.unit,margin:"auto",maxWidth:600},image:{width:"100px",height:"100px"},img:{margin:"auto",display:"block",maxWidth:"80px",maxHeight:"80px"},table:{width:"90%",margin:"5px auto"}}})(xe),we=function(e){function t(t){var a;return(a=e.call(this,t)||this).handleClickOpen=function(e){if(0===e.inputs.length)console.log(e),m.a.accounts().then(function(t){m.a.contract(a.state.contractabi).at(a.props.contractAddress)[e.name]().then(function(e){var t="";console.log("typeof txHash => \n",typeof e[0]),t="object"==typeof e[0]?e[0].toString():e[0],a.setMessage(!0,t)})});else{console.log(e);var t={};if(e.inputs){var n=e.inputs,r=Array.isArray(n),o=0;for(n=r?n:n[Symbol.iterator]();;){var i;if(r){if(o>=n.length)break;i=n[o++]}else{if((o=n.next()).done)break;i=o.value}t[i.name]=""}}a.setState({todoFunctionAbi:e,open:!0,deploydata:t})}},a.handleClose=function(){a.setState({open:!1})},a.setMessage=function(e,t){console.log(e,typeof t),e?a.setState({messageIsOpen:e,messageText:t}):a.setState({messageIsOpen:e})},a.SetInput=function(e,t){var n=a.state.deploydata;n[e]=t.target.value,a.setState({deploydata:n})},a.delpoyContract=function(){console.log("this.state.deploydata:",a.state.deploydata);var e=a.state.todoFunctionAbi,t=Object.values(a.state.deploydata);window.ethereum.enable().then(function(e){console.log(e)}),a.handleClose(),m.a.accounts().then(function(n){var r=m.a.contract(a.state.contractabi).at(a.props.contractAddress);r[e.name].apply(r,t.concat([{from:n[0]},function(e,t){if(e)console.log("error:",e);else{console.log("result:",t);var n="";console.log("typeof txHash => \n",typeof t[0]),n="object"==typeof t[0]?t[0].toString():t[0],a.setMessage(!0,n)}}]))})},a.delpoyContractt=function(){var e=Object.values(a.state.deploydata);window.ethereum.enable().then(function(e){console.log(e)}),console.log(a.state.deploydata),m.a.accounts().then(function(t){var n=m.a.contract(a.state.contract.abi,a.state.contract.bytecode,{from:t[0],gas:4e6});n.new.apply(n,e.concat([function(e,t){e||a.postDapp(t)}]))})},a.postDapp=function(e){var t={dappName:"",txHash:e,contractInfo:a.props.name,publicAddress:"0x81D723361d4F3e648F2c9c479d88DC6dEBF4fA5f",dappChain:"kovan"};p()(c.a+"/api/dapp",{body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"}).then(function(e){return e.json()}).then(function(t){t.id&&Object(s.b)("/dapp/deployed/"+e)})},a.state={open:!1,messageIsOpen:!1,messageText:"",contractabi:[],inputlist:[],deploydata:{},askapi:[],writeapi:[],todoFunctionAbi:{},transferJson:{}},a}r()(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this;console.log(this.props.contractName),console.log(this.props.contractAddress),p()(c.a+"/api/chain/abi?apiname="+this.props.contractName).then(function(e){return e.json()}).then(function(t){if(console.log(t.data),0===t.code){var a=[],n=[],r=t.data.abi,o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var s;if(o){if(i>=r.length)break;s=r[i++]}else{if((i=r.next()).done)break;s=i.value}var c=s;"function"===c.type&&(!0===c.constant?a.push(c):n.push(c))}console.log(n),console.log(a),e.setState({writeapi:n,askapi:a,contractabi:t.data.abi,transferJson:t.data.translate})}}).catch(function(e){console.log("失败")})},a.render=function(){var e=this,t=this.state,a=t.writeapi,n=t.askapi,r=t.todoFunctionAbi,o=t.transferJson,s=this.props.classes,c="";return r.inputs&&(c=r.inputs.map(function(t,a){var n=t.name;return i.a.createElement(h.a,{key:a,item:!0,xs:12},i.a.createElement(b.a,{required:!0,id:"address1",name:n,label:Object(u.b)(o,r.name,n),onChange:e.SetInput.bind(e,n),fullWidth:!0,autoComplete:"billing address-line1"}))})),i.a.createElement("div",{className:s.root},i.a.createElement(M.a,{className:s.drawer,variant:"permanent",classes:{paper:s.drawerPaper}},i.a.createElement("div",{className:s.toolbar}),i.a.createElement(J.a,null,n.map(function(t,a){return i.a.createElement(R.a,{button:!0,key:a},i.a.createElement(z.a,{primary:Object(u.a)(o,t.name),onClick:function(){return e.handleClickOpen(t)}}))})),i.a.createElement(q.a,null),i.a.createElement(J.a,null,a.map(function(t,a){return i.a.createElement(R.a,{button:!0,key:a},i.a.createElement(z.a,{primary:Object(u.a)(o,t.name),onClick:function(){return e.handleClickOpen(t)}}))}))),i.a.createElement("main",{className:s.content},i.a.createElement("div",{className:s.toolbar}),i.a.createElement(g.a,{paragraph:!0},i.a.createElement(ke,null))),i.a.createElement($.a,{className:s.dialog,open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},i.a.createElement(se.a,{id:"form-dialog-title"},"方法名称:",Object(u.a)(o,r.name)," "),i.a.createElement(ne.a,null,i.a.createElement(oe.a,null,"调用此方法将触发区块链钱包做签名，请慎重操作"),c),i.a.createElement(te.a,null,i.a.createElement(v.a,{onClick:this.handleClose,color:"primary"},"Cancel"),i.a.createElement(v.a,{onClick:function(){return e.delpoyContract()},color:"primary"},"submit"))),i.a.createElement(Y,{messageIsOpen:this.state.messageIsOpen,messageText:this.state.messageText,setMessage:function(t){return e.setMessage(t)}}))},t}(i.a.Component);we.propTypes={classes:k.a.object.isRequired};var Ce=C()(function(e){return{paper:{maxWidth:"550px",margin:"auto",marginTop:12*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:5*e.spacing.unit+"px "+5*e.spacing.unit+"px "+3*e.spacing.unit+"px"},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit},root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},content:{flexGrow:1,padding:3*e.spacing.unit},toolbar:e.mixins.toolbar,dialog:{minWidth:"600px",margin:"auto"}}})(we),Se=a(274),Te=function(e){function t(){return e.apply(this,arguments)||this}return r()(t,e),t.prototype.render=function(){return i.a.createElement("div",null,i.a.createElement(Se.a,null,i.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"0px 1.0875rem 1.45rem",paddingTop:0}},i.a.createElement(s.a,null,i.a.createElement(N,{path:"/dapp/create/:name/"}),i.a.createElement(Ce,{path:"/dapp/manage/:contractName/:contractAddress/"}),i.a.createElement(D,{path:"/dapp/:address/"})))))},t}(o.Component);t.default=Te},257:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n="http://127.0.0.1:3000"},274:function(e,t,a){"use strict";a(322);var n=a(0),r=a.n(n),o=a(1),i=a.n(o),s=a(118),c=a.n(s),l=a(117),p=a.n(l),m=a(74),u=a(292),d=a.n(u),h=a(293),f=a.n(h),g=a(250),y=a.n(g),b=a(256),E=a.n(b),v=a(273),x=a.n(v);function k(e){var t=e.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(d.a,{position:"static"},r.a.createElement(f.a,null,r.a.createElement(x.a,{className:t.menuButton,color:"inherit","aria-label":"Menu"}),r.a.createElement(y.a,{variant:"h6",color:"inherit",className:t.grow},r.a.createElement(E.a,{color:"inherit"},"首页"),r.a.createElement(E.a,{color:"inherit"},"API")),r.a.createElement(E.a,{color:"inherit"},"登陆"))))}k.propTypes={classes:i.a.object.isRequired};var w=Object(m.withStyles)({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20}})(k),C=Object(m.createMuiTheme)({palette:{primary:{light:"#2196f3",main:"#2196f3",dark:"#2196f3",contrastText:"#fff"},secondary:{light:"#ff7961",main:"#f44336",dark:"#ba000d",contrastText:"#000"}},typography:{useNextVariants:!0},shadows:Array(25).fill("none")}),S=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null),r.a.createElement(c.a,{theme:C},r.a.createElement(w,null),t))};S.propTypes={children:i.a.node.isRequired};t.a=S},275:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n,r=a(329);"undefined"!=typeof window&&(n=new r(window.ethereum||new r.HttpProvider("https://ropsten.infura.io/v3/0045c2ce288a4e649a8f39f3d19446b4")))},287:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r});var n=function(e,t){return e[t]?(console.log("jsonData[name].value",e[t].value),e[t].value):t},r=function(e,t,a){return console.log(e,t,a),e[t]&&e[t].inputs&&e[t].inputs[a]?e[t].inputs[a]:a}},331:function(e,t){}}]);
//# sourceMappingURL=component---src-pages-dapp-js-720327312eb5e110cd9c.js.map