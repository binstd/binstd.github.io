{"pageContext":{"page":{"fileAbsolutePath":"/Users/luz/code/js/binstd.dev/docs/003-erc-std/001-abi-use.md","html":"<h1 id=\"1-什么是abi\"><a href=\"#1-%E4%BB%80%E4%B9%88%E6%98%AFabi\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>1. 什么是abi</strong></h1>\n<p>本质上是对合约的建立了一个json格式的字典,通过该字典知晓每个合约方法的名称，方便各种语言的开发者去调用。</p>\n<p>API的格式是json文件，其中包含什么呢，如下：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"anonymous\"</span><span class=\"token keyword\">:</span> false,\n      <span class=\"token string\">\"inputs\"</span><span class=\"token keyword\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token string\">\"indexed\"</span><span class=\"token keyword\">:</span> true,\n          <span class=\"token string\">\"name\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"from\"</span>,\n          <span class=\"token string\">\"type\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"address\"</span>\n        <span class=\"token punctuation\">}</span>,\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token string\">\"indexed\"</span><span class=\"token keyword\">:</span> true,\n          <span class=\"token string\">\"name\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"to\"</span>,\n          <span class=\"token string\">\"type\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"address\"</span>\n        <span class=\"token punctuation\">}</span>,\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token string\">\"indexed\"</span><span class=\"token keyword\">:</span> false,\n          <span class=\"token string\">\"name\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"tokens\"</span>,\n          <span class=\"token string\">\"type\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"uint256\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>,\n      <span class=\"token string\">\"name\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"Transfer\"</span>,\n      <span class=\"token string\">\"type\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"event\"</span>\n    <span class=\"token punctuation\">}</span>,\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"constant\"</span><span class=\"token keyword\">:</span> false,\n      <span class=\"token string\">\"inputs\"</span><span class=\"token keyword\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token string\">\"name\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"from\"</span>,\n          <span class=\"token string\">\"type\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"address\"</span>\n        <span class=\"token punctuation\">}</span>,\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token string\">\"name\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"to\"</span>,\n          <span class=\"token string\">\"type\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"address\"</span>\n        <span class=\"token punctuation\">}</span>,\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token string\">\"name\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"tokens\"</span>,\n          <span class=\"token string\">\"type\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"uint256\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>,\n      <span class=\"token string\">\"name\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"transferFrom\"</span>,\n      <span class=\"token string\">\"outputs\"</span><span class=\"token keyword\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token string\">\"name\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"success\"</span>,\n          <span class=\"token string\">\"type\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"bool\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>,\n      <span class=\"token string\">\"payable\"</span><span class=\"token keyword\">:</span> false,\n      <span class=\"token string\">\"stateMutability\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"nonpayable\"</span>,\n      <span class=\"token string\">\"type\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"function\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span></code></pre>\n      </div>\n<p>其中每一项代表智能合约的一个方法，又或者一个属性。\nconstant：如果值为false代表该合约是操作类的合约，如果值为true。\nInputs：为一个数组,代表当前方法入参列表，每一项代表这个方法的一个参数。\nOutputs：代表该方法的返回列表，智能合约中可以返回多个值，所以也是一个数组。\nName：是这个合约方法的或属性，名称，如转账就是transfer。\n可用的abi项：type为function代表这个项可能是一个方法，又或者一个选项。</p>\n<h1 id=\"2-开发者如何使用abi\"><a href=\"#2-%E5%BC%80%E5%8F%91%E8%80%85%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8abi\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>2. 开发者如何使用abi</strong></h1>\n<p>我们以web前端开发者为例，可使用web3.js，eth.js以及ether.js，通过上面的abi和合约地址，就可以执行合约方法。\n例如：</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> Eth <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ethjs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> eth <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Eth</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Eth<span class=\"token punctuation\">.</span>HttpProvider</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://ropsten.infura.io'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\neth<span class=\"token punctuation\">.</span><span class=\"token function\">getBlockByNumber</span><span class=\"token punctuation\">(</span><span class=\"token number\">45300</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">,</span> block<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// result null { ...block data... }</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> etherValue <span class=\"token operator\">=</span> Eth<span class=\"token punctuation\">.</span><span class=\"token function\">toWei</span><span class=\"token punctuation\">(</span><span class=\"token number\">72</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ether'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//导入abi</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">ABI</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"constant\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"inputs\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"totalSupply\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"outputs\"</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"uint256\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"payable\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"function\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> contractAddress <span class=\"token operator\">=</span><span class=\"token string\">'0x6e0E0e02377Bc1d90E8a7c21f12BA385C2C35f78'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//传入合约abi和合约地址</span>\n<span class=\"token keyword\">const</span> token <span class=\"token operator\">=</span> eth<span class=\"token punctuation\">.</span><span class=\"token function\">contract</span><span class=\"token punctuation\">(</span><span class=\"token constant\">ABI</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">at</span><span class=\"token punctuation\">(</span>contractAddress<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//调取合约的totalSupply方法</span>\ntoken<span class=\"token punctuation\">.</span><span class=\"token function\">totalSupply</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>totalSupply<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// result &lt;BN ...>  4500000</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p>其他语言，php，python，java也都有类似的库可供使用。</p>\n<h1 id=\"3以太坊开发的一些辅助资料\"><a href=\"#3%E4%BB%A5%E5%A4%AA%E5%9D%8A%E5%BC%80%E5%8F%91%E7%9A%84%E4%B8%80%E4%BA%9B%E8%BE%85%E5%8A%A9%E8%B5%84%E6%96%99\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>3.以太坊开发的一些辅助资料</strong></h1>\n<h4 id=\"以太坊节点统计汇总\"><a href=\"#%E4%BB%A5%E5%A4%AA%E5%9D%8A%E8%8A%82%E7%82%B9%E7%BB%9F%E8%AE%A1%E6%B1%87%E6%80%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>以太坊节点统计汇总</h4>\n<p><a href=\"https://www.ethernodes.org/n\">https://www.ethernodes.org/</a></p>\n<h4 id=\"以太坊的论坛\"><a href=\"#%E4%BB%A5%E5%A4%AA%E5%9D%8A%E7%9A%84%E8%AE%BA%E5%9D%9B\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>以太坊的论坛</h4>\n<p><a href=\"https://ethresear.ch/\">https://ethresear.ch/</a></p>\n<h4 id=\"consensys官网\"><a href=\"#consensys%E5%AE%98%E7%BD%91\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>consensys官网</h4>\n<p>以太坊创始团队离开以太坊基金会后成立的公司.consensys做了什么呢?你熟悉的metamask,truffle,infure等等都出自他们.\n<a href=\"https://consensys.net/\">https://consensys.net/</a></p>\n<p>Pairty公司出品的一切\n<a href=\"https://www.parity.io/technologies/\">https://www.parity.io/technologies/</a></p>\n<h4 id=\"dapp开发\"><a href=\"#dapp%E5%BC%80%E5%8F%91\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>dapp开发</h4>\n<p>写和一\nsolidity官方手册(中文)\n<a href=\"https://solidity-cn.readthedocs.io/zh/\">https://solidity-cn.readthedocs.io/zh/</a></p>\n<p>Consensys的以太坊智能合约最佳安全实践\n<a href=\"https://github.com/ConsenSys/smart-contract-best-practices/blob/master/README-zh.md\">https://github.com/ConsenSys/smart-contract-best-practices/blob/master/README-zh.md</a></p>\n<p>Consensys家出品的区块链学习内容平台\n<a href=\"https://beta.kauri.io/articles\">https://beta.kauri.io/articles</a></p>\n<p>不同语言的开发库\n.net\n<a href=\"https://nethereum.readthedocs.io/en/latest/\">https://nethereum.readthedocs.io/en/latest/</a>\npython版web3\n<a href=\"https://web3py.readthedocs.io/en/stable/\">https://web3py.readthedocs.io/en/stable/</a></p>\n<p>Js（web3之外的最佳选择）\n<a href=\"https://github.com/ethers-io/ethers.js/\">https://github.com/ethers-io/ethers.js/</a></p>\n<p>开发ide：\n适用于atom的模块，可将你的atom变成remix那样子\n<a href=\"https://atom.io/packages/etheratom\">https://atom.io/packages/etheratom</a></p>\n<p><em>loom出品,Remix之外的另一个选择</em>\n<a href=\"https://ethfiddle.com/\">https://ethfiddle.com/</a></p>\n<p><em>Embark框架-一套合约编译部署</em>\n<a href=\"https://embark.status.im/\">https://embark.status.im/</a></p>\n<p><em>每周以太坊(有两个站)</em>\n<a href=\"https://weekinethereum.substack.com/\">https://weekinethereum.substack.com/</a></p>\n<p><a href=\"http://www.weekinethereum.com/\">http://www.weekinethereum.com/</a></p>\n<p><em>学习learn plasma</em>\n<a href=\"https://www.learnplasma.org\">https://www.learnplasma.org</a></p>","headings":[{"value":"1. 什么是abi","depth":1},{"value":"2. 开发者如何使用abi","depth":1},{"value":"3.以太坊开发的一些辅助资料","depth":1},{"value":"以太坊节点统计汇总","depth":4},{"value":"以太坊的论坛","depth":4},{"value":"consensys官网","depth":4},{"value":"dapp开发","depth":4}],"frontmatter":{"path":null,"title":"智能合约abi介绍和使用"}},"nav":[{"title":"api使用入门","children":[{"title":"接口使用介绍","path":"/docs/getting-started/info"},{"title":"API-key的获得和API调用","path":"/docs/getting-started/api-key"},{"title":"接口参数说明","path":"/docs/getting-started/api-return"}],"redirectFrom":"/docs/getting-started","path":"/docs/getting-started/info"},{"title":"ETH&ERC20操作API","children":[{"title":"web支付中间页","path":"/docs/pay-api/ui-pay"},{"title":"自动转账","path":"/docs/pay-api/auto-pay"}],"redirectFrom":"/docs/pay-api","path":"/docs/pay-api/ui-pay"},{"title":"通用查询接口","children":[{"title":"token余额","path":"/docs/commonquery/token-balance"},{"title":"当前gas价格","path":"/docs/commonquery/gas_price"},{"title":"token明细","path":"/docs/commonquery/tokeninfo"},{"title":"交易记录","path":"/docs/commonquery/txall"},{"title":"交易详情","path":"/docs/commonquery/tx-hash"}],"redirectFrom":"/docs/commonquery","path":"/docs/commonquery/token-balance"},{"title":"binstd平台标准智能合约","children":[{"title":"智能合约abi介绍和使用","path":"/docs/erc-std/abi-use"},{"title":"获取合约abi接口","path":"/docs/erc-std/get-abi"},{"title":"abi翻译规范","path":"/docs/erc-std/translate"},{"title":"erc721合约","path":"/docs/erc-std/erc721"}],"redirectFrom":"/docs/erc-std","path":"/docs/erc-std/abi-use"},{"title":"公钥身份管理","children":[{"title":"提交联系人","path":"/docs/user-id/post-contact"},{"title":"获取联系人列表","path":"/docs/user-id/get-contact"}],"redirectFrom":"/docs/user-id","path":"/docs/user-id/post-contact"}]}}